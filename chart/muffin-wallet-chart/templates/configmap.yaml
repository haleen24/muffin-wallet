apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Values.app.applicationConfigVolume}}
data:
  application.yaml: |
    ---
    server:
      port: 8081
    spring:
      mvc:
        log-request-details: true
      application:
        name: muffin-wallet
      datasource:
        url: ${DB_URL}
        username: ${DB_USERNAME}
        password: ${DB_PASSWORD}
    currency:
      service:
        url: http://muffin-currency/rate
    logging:
      level:
        org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping: TRACE
      file:
        name: /logs/app.log
    management:
      zipkin:
        tracing:
          enabled: false
          endpoint: http://zipkin.monitoring.svc.cluster.local:9411/api/v2/spans
      tracing:
        enabled: false
      endpoints:
        web:
          exposure:
            include: health,info,metrics,prometheus 
          base-path: /actuator
      metrics:
        export:
          prometheus:
            enabled: true
            distribution:
        distribution:
          percentiles-histogram:
            http.server.requests: true
      endpoint:
        health:
          probes:
            enabled: true
          show-details: always
        prometheus:
          enabled: true
        metrics:
          enabled: true